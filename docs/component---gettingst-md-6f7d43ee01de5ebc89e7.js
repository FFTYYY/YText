(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3U3t":function(e,t,n){e.exports=n.p+"static/pic2-febe3b01e902e26775305b32eda5a3f3.png"},Y6ah:function(e,t,n){e.exports=n.p+"static/pic1-3b8ad06efd96186ef571a6d42d6cd161.png"},zTRJ:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return d}));var r=n("Fcif"),a=n("+I+c"),o=(n("mXGw"),n("/FXl")),i=n("TjRS"),s=(n("aD51"),["components"]),c={};void 0!==c&&c&&c===Object(c)&&Object.isExtensible(c)&&!Object.prototype.hasOwnProperty.call(c,"__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"gettingst.md"}});var l={_frontmatter:c},p=i.a;function d(e){var t=e.components,i=Object(a.a)(e,s);return Object(o.b)(p,Object(r.a)({},l,i,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"getting-started"},"Getting Started"),Object(o.b)("p",null,"In this page, we show the basic usage of YText by creating a simple example project."),Object(o.b)("h2",{id:"installation"},"Installation"),Object(o.b)("p",null,"Make sure you are in a ",Object(o.b)("a",{parentName:"p",href:"https://reactjs.org/"},"React")," project and simply use npm to install YText:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"npm install @ftyyy/ytext\n")),Object(o.b)("p",null,"and can import ytext in your code:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'import * from "@ftyyy/ytext"\n')),Object(o.b)("h2",{id:"use-ytext-in-your-project"},"Use YText in your Project"),Object(o.b)("p",null,"In this section, we set up an example project to show how to use YText. There are three major steps: create concepts, create printer, and create editor."),Object(o.b)("h3",{id:"create-concepts"},"Create Concepts"),Object(o.b)("p",null,"First import necessary classes from YText:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'import {\n    FirstClassConcept , \n    SecondClassConcept ,  \n} from "@ftyyy/ytext"\n')),Object(o.b)("p",null,"Then create a first class concept, say we want to write a mathmatics paper, hence we create a concept for propositions:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'let math = new FirstClassConcept({\n    type:"group" , \n    name: "math" , \n    parameter_prototype: {\n        name: {\n            val: "Proposition", \n            type: "string" , \n        } , \n    }\n})\n')),Object(o.b)("p",null,"As we know, there are different types of propositions in a mathmatics paper (e.g. Theorems, Lemmas, Corollaries).\nWe create a second class concept that inherits the first class concept we just created and override its parameters:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'let theorem = new SecondClassConcept({\n    type: "group" , \n    first_concept: "math" , // each first class concept is referred by its type and name.\n    name: "theorem" , \n    default_override: { // parameters that allow users to determine.\n        alias: {\n            val: "" , \n            type: "string" , \n        } , \n    } , \n    fixed_override: { // assigning values to the first class concept parameters.\n        name: { \n            val: "p => p.alias.val ? `Theorem (${p.alias.val})` : \'Theorem\'" , \n            type: "function" , // this type allow dynamic value that depends on the parameters of the second class concept\n        }\n    }\n})\n')),Object(o.b)("p",null,"(Actually, this is not the best way to define a theorem concept. Here I just want to display the usage of function-type parameters.)"),Object(o.b)("h3",{id:"creating-printer"},"Creating Printer"),Object(o.b)("p",null,"Next, we need to define how to transfer a ",Object(o.b)("strong",{parentName:"p"},"first class")," concept node into a visual element (A node in React).\nYText provides abundant tools to develop your own printer. First we need to import the tools that we will use:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'import {\n    PreprocessInformation , \n    GroupNode , \n\n    OrderContexter , \n    get_default_group_renderer , \n    DefaultAbstractRendererAsProperty , \n    PrinterStructureBoxText , \n    PrinterPartBox , \n} from "@ftyyy/ytext"\n')),Object(o.b)("p",null,"When rendering nodes, YText use so called ",Object(o.b)("strong",{parentName:"p"},"context")," to let each node know its position in the article and its relationship with others.\nThe detailed machanisms will be introduced later. YText have numerous tools to help build context. They are called ",Object(o.b)("strong",{parentName:"p"},"contexters"),". Here we will use ",Object(o.b)("inlineCode",{parentName:"p"},"OrderContexter"),', that allows a node to know its number in the article\n(for example we might want to start a theorem with: "Thm 1: xxx", obviously we don\'t want to number it manually).\nWe can first create a ',Object(o.b)("inlineCode",{parentName:"p"},"OrderContexter"),":"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'let number_gene = (info:PreprocessInformation<GroupNode>)=>new OrderContexter<GroupNode>("math")\n')),Object(o.b)("p",null,"Notice that contexters are stateless, so we always create them by functions. Next, we can create a printer. We can use tools that offered by YText. For example ",Object(o.b)("inlineCode",{parentName:"p"},"PrinterStructureBoxText")," provides a special style for title texts,\nand ",Object(o.b)("inlineCode",{parentName:"p"},"PrinterPartBox")," provides a margin style for group nodes."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},"let math_printer = get_default_group_renderer({\n\n    // contexters that will be used to creat context.\n    contexters: [ \n        number_gene, \n    ] , \n\n    // the element to start with.\n    pre_element: (info: PreprocessInformation<GroupNode>) => {\n        let {node , context , parameters , env} = info\n\n        let number = number_gene(info).get_context(context) // generate number.\n        let name = parameters.name // get name from parameters.\n        \n        return <PrinterStructureBoxText inline>{`${name} (${number})`}</PrinterStructureBoxText>\n    } , \n\n    // the box that contains the node\n    outer: (props) => {\n        return <PrinterPartBox subtitle_like>{props.children}</PrinterPartBox>\n    } , \n})\n")),Object(o.b)("p",null,"We will also need to create default renderers for all the node types. YText also provides tools to simplify that:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'import {\n    get_default_paragraph_renderer , \n    useless_renderer_block , \n    useless_renderer_inline , \n    useless_renderer_text , \n} from "@ftyyy/ytext"\n\nlet default_renderers = {\n    "group"     : useless_renderer_block , \n    "structure" : useless_renderer_block , \n    "support"   : useless_renderer_block , \n    "abstract"  : useless_renderer_block , \n    "paragraph" : get_default_paragraph_renderer({}) , \n    "inline"    : useless_renderer_inline , \n    "text"      : useless_renderer_text , \n}\n')),Object(o.b)("p",null,"When YText see a undefined concept, the default printers will be in use. "),Object(o.b)("h3",{id:"creating-editor"},"Creating Editor"),Object(o.b)("p",null,"Next, let's create editors. We can directly use the default editor implementation provide by YText."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'import {\n    get_deafult_group_editor_with_appbar , \n    get_default_editors , \n} from "@ftyyy/ytext"\n\nlet math_editor  = get_deafult_group_editor_with_appbar({\n    get_label: (node,parameters) => parameters.name\n})\n')),Object(o.b)("h3",{id:"combining-everything-together"},"Combining Everything Together"),Object(o.b)("p",null,"Now we have almost done. Let's write a full component with concepts, printers and editors we just defined."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-javascript"},'import {\n    Printer , \n    EditorCore , \n    AbstractNode , \n    PrinterCache , \n    DefaultPrinterComponent , \n    DefaultEditorComponent , \n} from "@ftyyy/ytext"\n\nclass App extends React.Component<{} , {\n    tree: AbstractNode\n}>{\n    editor_ref : React.RefObject<DefaultEditorComponent> // reference to editor component.\n    printer: Printer\n    editorcore: EditorCore\n    constructor(props: any){\n        super(props)\n\n        let me = this\n\n        // build printer.\n        this.printer = new Printer(\n            [math] ,    // feed in first class concepts.\n            [theorem] , // feed in second class concepts.\n            {           // feed in all renderers.\n                group: {\n                    "math": math_printer , \n                } , \n                structure: {} , inline: {} , support: {} , abstract: {} , \n            } , \n            default_renderers , // feed in all default renderers.\n        )\n\n        // build editor core.\n        this.editorcore = new EditorCore({\n            renderers: { // put in renderers.\n                group: {\n                    math: math_editor , \n                } , structure: {} , inline: {} , support: {} , abstract: {} , \n            } , \n            default_renderers: get_default_editors(), // feed in default renderers, this is defined by YText.\n            printer: me.printer , // feed in the printer.\n        })\n        \n        // initialize the inermediate tree.\n        this.state = {\n            tree: this.editorcore.create_abstract("root")\n        }\n\n        this.editor_ref = React.createRef()\n    }\n\n    render(){\n        let me = this\n        return <div>\n                    \n            <div style = {{position: "absolute", width: "48%", left: "1%", top: "1%", height: "98%"}}>\n                <DefaultEditorComponent // editor component.\n                    ref = {me.editor_ref}\n                    editorcore = {me.editorcore} // input editor core.\n\n                    // This is the initialization of editor, the updates in the tree will not trigger rerendering.\n                    init_rootchildren = {me.state.tree.children} \n\n                    onSave = {()=>{ // the callback function whem ctrl+S is pressed.\n                        me.setState({tree: me.editor_ref.current.get_root() as AbstractNode})\n                        // save the tree to backend.\n                        // save(me.state.tree)\n                    }}\n                />\n            </div>\n\n            <div style = {{position: "absolute", width: "48%", left: "51%", top: "1%", height: "98%",}} >\n                <DefaultPrinterComponent // printer component.\n                    printer = {me.printer} // input printer core.\n                    root = {me.state.tree} // the update of state.tree will trigger rerenderring of Printer.\n                ></DefaultPrinterComponent>\n            </div>\n        </div>\n    }\n}\n')),Object(o.b)("p",null,"It will result in a React component like this:\n",Object(o.b)("img",{alt:"img-1",src:n("Y6ah")}),"\nThe left part is the editing area, where we can write texts and add theorems.\nWhen pressing ctrl+s, the printer (on the right) will be updated:\n",Object(o.b)("img",{alt:"img-2",src:n("3U3t")})))}void 0!==d&&d&&d===Object(d)&&Object.isExtensible(d)&&!Object.prototype.hasOwnProperty.call(d,"__filemeta")&&Object.defineProperty(d,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"gettingst.md"}}),d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---gettingst-md-6f7d43ee01de5ebc89e7.js.map